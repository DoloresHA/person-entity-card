(function(){"use strict";function a(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}function b(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function c(a){for(var c,e=1;e<arguments.length;e++)c=null==arguments[e]?{}:arguments[e],e%2?b(Object(c),!0).forEach(function(b){d(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):b(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))});return a}function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var e,f,g,h,j;(()=>{var b=window.LitElement||Object.getPrototypeOf(customElements.get("ha-panel-lovelace")||customElements.get("hc-lovelace")),{html:d,css:i}=b.prototype;customElements.define("custom-person-card",class extends b{static get properties(){return{hass:{},config:{}}}handleTap(a,b){((b,d,e,f)=>{var g;switch(f.action){case"more-info":g=new Event("hass-more-info",{composed:!0}),g.detail={entityId:f.entity||e.entity},b.dispatchEvent(g);break;case"navigate":if(!f.navigation_path)return;history.pushState(null,"",f.navigation_path),g=new Event("location-changed",{composed:!0}),g.detail={replace:!1},window.dispatchEvent(g);break;case"call-service":if(!f.service)return;var[a,i]=f.service.split(".",2),h=c({},f.service_data);d.callService(a,i,h);}})(this,this._hass,this.config,{action:"more-info",entity:b})}setConfig(a){if(!a.entities)throw new Error("You need to define entities");this.config=a}_toggle(a){var{entity_id:b}=a;this.hass.callService("homeassistant","toggle",{entity_id:b})}static get styles(){return i(e||(e=a(["\n      ha-card {\n        background: none;\n        border: none;\n        box-shadow: none;\n        font-family: inherit, Inter, -apple-system, BlinkMacSystemFont,\n          'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;\n        padding-left: 0.5rem;\n        padding-right: 0.5rem;\n      }\n\n      .person-entity-title {\n        font-size: 0.9375rem;\n      }\n\n      .person-entity {\n        display: flex;\n      }\n\n      .person-entity > .person-entity-chip + .person-entity-chip {\n        margin-left: 1rem;\n      }\n\n      .person-entity-chip {\n        align-items: center;\n        background-color: var(--card-background-color);\n        border: thin solid var(--primary-color);\n        border-radius: 1.5625rem;\n        cursor: pointer;\n        display: flex;\n        font-weight: bold;\n        height: 2.5rem;\n        justify-content: flex-start;\n        line-height: 2.5rem;\n        padding: 0 1rem 0 1px;\n        overflow: hidden;\n        width: auto;\n      }\n\n      .person-entity-chip > img {\n        border-radius: 50%;\n        height: auto;\n        margin-right: 1rem;\n        width: 2.3125rem;\n      }\n    "])))}renderTitle(b){return""===b?"":d(f||(f=a(["\n        <p class='person-entity-title'><strong>","</strong></p>\n      "])),b)}renderPeople(b){var c=Object.keys(b),{language:e,resources:f}=this.hass,i=f[e];return d(g||(g=a(["\n      ","\n    "])),c.map(c=>"home"!==b[c].state&&"unknown"!==b[c].state?d(h||(h=a(["\n              <div\n                class='person-entity-chip'\n                @click=","\n              >\n                <img src='","' />\n                ","\n              </div>\n            "])),a=>this.handleTap(a,c),b[c].attributes.entity_picture,"home"!==b[c].state&&"not_home"===b[c].state?i["component.person.state._.not_home"]:b[c].state):""))}render(){var{hass:b}=this,{entities:c,title:e}=this.config,f=new RegExp("^(".concat(c.toString().replaceAll(",","|"),")$")),g=Object.keys(b.states).filter(a=>null!==a.match(f)).reduce((a,c)=>Object.assign(a,{[c]:b.states[c]}),{}),h=!0;return Object.keys(g).map(a=>"home"===g[a].state?"":h=!1),h?"":d(j||(j=a(["\n          <ha-card>\n            ","\n            <div class='person-entity'>","</div>\n          </ha-card>\n        "])),this.renderTitle(e),this.renderPeople(g))}})})()})();
